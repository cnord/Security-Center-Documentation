# Менеджер отчетов

Модуль «Менеджер отчетов» предназначен для создания отчетов о работе объектов, «Центра охраны» и персонала охранного предприятия.

В модуль «Менеджер отчетов» встроен генератор форм отчетов, с помощью которого можно видоизменять существующие отчеты или создавать новые.

## Отчеты по событиям

При создании отчетов по событиям необходимо помнить об алгоритмах фильтрации, которые используются при регистрации событий. Подробнее о фильтрации событий рассказано в разделе, посвященном модулю «Менеджер событий», здесь же хочется отметить, что при необходимости можно включить отфильтрованные события в создаваемые отчеты.

Все отчеты по событиям, если специально не оговорено обратное, создаются с учетом выбранных объектов и классов событий. Благодаря этому отчеты могут создаваться для решения разных задач, в том числе и специфичных для конкретного охранного предприятия.

Первые три отчета по событиям («01 — Сортировка по времени», «02 — Сортировка по объектам» и «03 — С группировкой по объектам») предназначены для просмотра полученных от объектов событий в разных представлениях. Необходимо отметить, что если для объекта созданы разделы, имеющие собственные объектовые номера, то события с этих разделов отображаются в отчетах по событиям. При этом объектовый номер раздела указывается в скобках после номера объекта.

### События с неописанных объектов

Отчет «04 — С неописанных объектов» предназначен для просмотра событий, которые «Центру охраны» не удалось связать ни с одним из существующих объектов. Так же, как и модуль «События с неописанных объектов», этот отчет предназначен для выявления ошибок, сделанных при программировании объектового оборудования, либо при описании объектов в «Центре охраны». Для этого отчета — по понятным причинам — выбранные при его создании объекты и классы событий значения не имеют.

### Объекты без событий

Назначение отчета «05 — Список объектов без событий» — двояко. Проще всего с его помощью получить перечень объектов, от которых за заданный промежуток времени не было получено ни одного события. Для этого нужно выбрать в списке объектов все объекты, а в списке классов событий — все классы событий. 

Задача поинтереснее — найти, к примеру, все объекты типа «Банк», от которых за последний месяц не было ни одной неисправности. Для этого нужно выбрать все объекты нужного типа и классы событий, имеющие тип «Неисправность». В созданном по таким параметрам отчете будут содержаться только искомые объекты.

### Отклонение времени

С помощью отчета «06 — По отклонению времени» можно проконтролировать правильность программирования интервала автоматического теста на объекте и правильность заполнения поля «Контрольное время» в карточке объекта. При создании отчета рассчитывается средний временной интервал между событиями с объекта, после чего он сравнивается с контрольным временем объекта. 

Если разность значений больше, чем заданный при создании отчета порог, то такой объект будет выделен в списке. В зависимости от алгоритмов, которые используются контрольными панелями для расчета времени создания следующего автоматического теста, при создании отчета можно исключить все события, тип класса которых не «Тест».

### Статистика по классам

Отчет «07 — Статистика» нужен для того, чтобы посчитать количество событий заданных классов, которые были получены от объекта за период. В первую очередь отчет полезен для выявления объектов с неисправностями разного рода. Например, если при создании отчета выбрать класс событий «Неисправность 220В», то можно подсчитать, сколько раз за заданный период на объекте были проблемы с электропитанием. Для того, чтобы включить в отчет только те объекты, на которые действительно нужно обратить внимание, при создании отчета можно задать минимальное количество событий каждого из заданных классов, которое должно быть получено, чтобы объект был включен в отчет.

Необходимо отметить, что для эффективного использования этого отчета пользователь должен создать отдельные классы для тех событий, наблюдение за которыми представляет для него интерес.

### Отправленные SMS

Отчеты, которые принадлежат группе «08 — Отправленные SMS» — «12 — SMS, группировка по объектам», предназначены для контроля работы обработчика событий «Ретранслятор SMS». С помощью этих отчетов можно получить информацию о SMS-сообщениях, которые были созданы при обработке событий по объектам, а также о времени доставки этих SMS-сообщений получателю.

### Статистика по каналам

В зависимости от настроек, с которыми будет создаваться отчет «13 — По каналам связи», с его помощью можно решать несколько задач. Во-первых, можно оценить, какие каналы связи задействует объект и в каком объеме, подсчитав, сколько событий получено от него по каждому из каналов связи. Во-вторых, можно оценить загрузку отдельного канала связи, подсчитав количество событий, полученных по нему со всех выбранных объектов.

### Статистика по состоянию

С помощью отчета «14 — Состояние объекта» можно подсчитать количество и продолжительность ситуаций, когда объект находился в некотором состоянии. 
Каждое состояние объекта в рамках данного отчета характеризуется двумя событиями: первое событие сигнализирует о том, что объект перешел в известное состояние, при получении второго события считается, что объект из этого состояние вышел. Хорошими примерами состояний объекта являются неисправность питания или канала связи.

К примеру, при нарушении электропитания на объекте будет создано событие, регистрирующие факт неисправности, а после того, как неисправность устранена, будет создано событие о восстановлении электропитания. Если необходимо подсчитать сколько раз объект находился в состоянии «нарушено электропитание», а кроме того — какова суммарная продолжительность его нахождения в этом состоянии, то при создании этого отчета нужно указать классы событий, соответствующие неисправности и восстановлению электропитания.

Состояния, представляющие интерес для пользователей «Центра охраны» могут быть самыми разными. Для того, чтобы этот отчет мог активно применяться при работе с «Центром охраны», нужно создать отдельные классы для тех событий, которые регистрируют начало и завершение нахождения объекта в интересующем пользователя состоянии.

## Отчеты по тревогам

Все тревожные события, зарегистрированные «Центром охраны», требуют обязательной отработки оператором. Если по объекту регистрируется тревожное событие в тот момент, когда по этому же объекту есть другое неотработанное событие, то такие события объединяются в группу и дальше отрабатываются вместе. Отработка тревог осуществляется в модуле «Дежурные оператор». При отработке тревоги оператор регистрирует в «Центре охраны» действия, которые он выполнил при отработке тревоги. По завершению отработки оператор отменяет тревогу, регистрируя время и результат отработки.

Большинство отчетов по тревогам при создании позволяют уточнить, нужно ли включать данные по тревогам, по которым не было вызовов групп быстрого реагирования. Это связано с тем, что такие тревоги многими охранными предприятиями считаются технологическими, либо ложными. Поэтому в некоторых отчетах их быть не должно, а в некоторых, наоборот, должны быть только такие тревоги.

При создании отчетов по тревогам необходимо выбрать объекты и классы тревожных событий, которые должны быть включены в отчет. Если при создании отчета важно выбрать только те тревоги, по которым были зарегистрированы определенные действия, то можно явно указать действия операторов, которые нужны.

### Стандартный отчет и отчет по оператору

Отчет «01 — По оператору» предназначен для просмотра тревог, в отработке которых принимал участие конкретный оператор. А с помощью отчета «02 — Стандартный» можно просмотреть все зарегистрированные тревоги и действия по ним. Дополнительно, при создании этого отчета можно вывести только те тревоги, по которым не было вызовов групп.

### Статистика по отменам тревог

При создании отчета «03 — По количеству отмен» можно указать минимальное количество отмен, которое должно быть зарегистрировано за период. Если при этом выбрать какую-то конкретную отмену, например, «Неисправность оборудования», и указать, что таких отмен должно быть не менее 5, то можно получить отчет, в который будут включены все объекты, тревоги по которым не менее 5 раз отменялись с указанием причины «Неисправность оборудования».

Отчет «03а — Статистика по отменам» предназначен для подсчета количества выбранных отмен, зарегистрированных за заданный период. С его помощью можно посмотреть, какие причины отмены тревог регистрируются чаще других и насколько. Например, можно увидеть какую долю занимают тревоги, которые были отменены, как ложные.
Кроме подсчета общего количества отмен по всем выбранным объектам, отчет позволяет детализировать отмены по объектам, для того, чтобы видеть на каких именно объектах возникало больше ложных тревог или тревог, на которых были вызовы групп.

С помощью отчета «03b — Сводный по отменам» можно увидеть еще один вариант детализации отмен по объектам. Отчет удобнее просматривать, чем предыдущий, но есть ограничение — в него может быть включено не более четырех отмен. Так же, как и предыдущий, этот отчет позволяет узнать, какие объекты выделяются в общем списке причинами возникающих на них тревог.

Отчет «03с — Сводный по отмене с комментарием» позволяет выбрать одну причину отмены тревоги, подсчитать количество тревог, при отмене которых была указана эта причина, а кроме того — вывести все комментарии, которые зарегистрировали операторы при отработке этих тревог. Если алгоритм отработки тревог операторами требует внесения комментариев при регистрации ситуаций, сопровождающих отработку, то этот отчет будет очень полезен при анализе причин возникновения тревог, а также проблем, которые возникают при их отработке.

Последний из сводных отчетов по отменам тревог, «05 — Отмены по дням» позволяет выбрать одну причину отмены тревоги и подсчитать, сколько раз эта причина использовалась в каждый из дней выбранного периода. Дополнительно к этому отчет позволяет выбрать одну дополнительную характеристику объекта, которая также будет включена в отчет. 

Предположим, что с помощью предыдущих отчетов выяснилось, что по объекту за месяц было много ложных тревог. С помощью отчета «05 — Отмены по дням» можно выяснить, как распределялись эти тревоги по дням месяца: происходили они каждый день или в чьи-то конкретные смены. 

### Тревоги и события

Отчет «04 — С событиями» представляет собой комбинацию двух отчетов — отчета по событиям и отчета по тревогам. При создании этого отчета можно выбрать не только классы событий с типом «Тревога», но и другие. При этом именно события с типом класса «Тревога» и действия, которые зарегистрированы при их отработке, определяют, какие объекты будут включены в отчет. События же с другими типами классов будут включены в отчет после того, как будет создан стандартный отчет по тревогам.

События, которые были получены до и после тревоги могут быть полезны при выяснении причин возникновения тревоги, поэтому чаще всего этот отчет используется именно для этого.

## Отчеты по времени охраны

Назначение этой группы отчетов — предоставить информацию о времени, в течении которого объект находился под охраной, либо уточнить, находился ли объект под охраной в заданное время.

### Время охраны

Отчет «01 — С суммой времени» позволяет посуточно просмотреть постановки и снятия объекта за период, время, в течении которого объект находился под охраной, а также время, которое объект должен был охраняться в соответствии с расписанием охраны.

При выводе постановок и снятий объекта выполняется принудительная фильтрация этих событий: если несколько постановок получено подряд, то в отчет будет включена только первая из них. Если же несколько снятий идут подряд, то в отчет будет включено только последнее снятие.

Время, которое объект должен был находиться под охраной по расписанию, не зависит от того, включен ли для объекта контроль расписания охраны. Таким образом, даже если расписание охраны объекта не контролируется, оно все равно может использоваться для сравнения предполагаемого и действительного времени нахождения объекта под охраной.

С помощью отчета «02 — Кратко» можно получить просто сумму времени, в течении которого объект находился под охранной за заданный период. Этот отчет может быть полезен в тех случаях, когда оплата за услуги охраны зависит от времени, в течении которого объект находился под охраной.

### Состояние охраны

Нередко возникают ситуации, когда нужно выяснить, в каком состоянии находился тот или иной объект в конкретный день и время. Для решения такой задачи предназначен отчет «03 — Состояние охраны». При создании отчета нужно выбрать интересующие дату, время и состояние охраны объекта. 

## Отчеты по группам быстрого реагирования

Анализ работы групп быстрого реагирования позволяет оценить качество оказываемых услуг охраны и добросовестность экипажей. Кроме того, связав вызовы групп с объектами, можно выделить объекты, на которые группы реагирования вызываются чаще, чем на остальные и сделать в отношении этих объектов какие-то организационные выводы.

Отчет по группам быстрого реагирования напоминают отчеты по тревогам, только они ориентированы на специфику, связанную с работой групп — подсчет времени прибытия, среднее время прибытия, количество вызовов и так далее.

Для того, чтобы отчеты по тревогам и группам быстрого реагирования были по настоящему полезны, процедура отработки тревог должна быть связана с действиями и причинами отмены тревог, которые регистрируют операторы. Во-первых, нужно выделить типовые ситуации, которые служат причиной возникновения тревог. Во-вторых, для отработки этих ситуаций нужно создать действия и отмены тревог. В-третьих, нужно обучить оператора выявлять типовые ситуации, действовать в соответствии с разработанным для них регламентом и регистрировать именно те действия и отмены, которые соответствуют возникшей ситуации.

### Работа групп

Отчет «01 — Работа групп» предназначен для вывода всех тревог за период, по которым регистрировались вызовы выбранных групп реагирования. 

### Статистика выездов

Следующий отчет, «02 — Статистика выездов», отображает основную статистику, связанную с работой групп за период: общее количество вызовов группы, количество вызовов, которые были отменены, время, которое группа провела на вызовах, а также среднее время прибытия группы. Отчет может быть полезен для оценки загруженности группы, а также для выявления наиболее и наименее загруженных групп быстрого реагирования.

### Среднее количество вызовов

С помощью отчета «03 — Среднее количество вызовов» можно подсчитать общее количество вызовов групп быстрого реагирования на объекты, а также среднее количество вызовов групп на объект в месяц. Этот отчет используется для выявления объектов, на которые группы вызываются чаще всего.

### Время реагирования

Назначение отчета «04 — Время реагирования» — оценка времени, которое проходит от момента получения тревоги до вызова группы быстрого реагирования и ее прибытия на объект. При создании отчета можно указать максимально допустимые значения этих интервалов, чтобы в отчет были включены только те тревоги, где эти значения были превышены.

### Статистика по отменам

Так же, как и аналогичный отчет по тревогам, отчет «05 — Статистика по отменам» позволяет подсчитать количество зарегистрированных причин отмен тревоги за период, но только в отношении выбранных групп реагирования. С помощью этого отчета можно оценить, какое количество тревог, на которые была вызвана группа, были ложными и почему.

## Отчеты по объектам

Набор отчетов по объектам предназначен для создания твердой копии для основных данных «Центра охраны»: объектов, операторов, шаблонов событий и обработчиков событий.

### Объекты

Отчеты «01 — Список объектов», «02 — Минимальная карточка», «03 — Короткая карточка» и «04 — Полная карточка» предназначены для просмотра и печати информации об объектах в разных представлениях и разном объеме.

Отчет «06 — Контрольное время» позволяет вывести объекты, контрольное время которых находится в заданных при создании отчета границах. Отчет может быть полезен при ранжировании объектов, если контрольное время для объекта выставляется в соответствии с его важностью.

### Операторы

С помощью отчета «05 — Операторы» можно распечатать список пользователей программного обеспечения «Центр охраны» и их прав в модулях.

### Шаблоны событий

Разнообразную информацию об использовании шаблонов событий можно получить с помощью отчета «07 — Список шаблонов событий». В зависимости от параметров, которые были заданы при создании отчета, можно узнать, какие шаблоны используются для объектов, а какие — нет. Для тех шаблонов, которые используются, можно подсчитать количество объектов, которые их используют.

Если дополнительно к списку шаблонов событий необходимо получить описания событий, которые включены в тот или иной шаблон, то для этого можно воспользоваться отчетом «08 — Коды шаблонов событий». 

### Обработчики событий

Отчет «09 — Ретрансляторы SMS» предназначен для просмотра и печати информации о настройках обработчиков событий «Ретрансляторы SMS». С его помощью можно получить информацию обо всех обработчиках, которые используются для выбранных объектов, или только о тех из них, для которых указан конкретный номер получателя.

### Список объектов для системы «Стрелец-Мониторинг»

Программное обеспечение «Центр охраны» обладает возможностью передавать информацию об объектах и полученных событиях в шлюз передачи извещений системы «Стрелец-Мониторинг». Для того, чтобы идентифицировать объекты «Центра охраны» и их шлейфы в системе «Стрелец-Мониторинг», используются специальные метки (GUID), которые присваивает объектам «Центр охраны» и которые необходимо указывать в системе «Стрелец-Мониторинг» при создании объектов и шлейфов. Для того, чтобы передать операторам системы «Стрелец-Мониторинг» всю информацию, необходимую для создания объектов «Центра охраны», используется отчет «10 — Объекты с GUID (для Стрельца)».

