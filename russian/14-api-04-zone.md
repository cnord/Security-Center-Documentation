\pagebreak

# Шлейфы

Методы для управления шлейфами объекта: получение списка шлейфов, создание, изменение или удаление шлейфа объекта.

## Поля шлейфа {#api-zone-json}

Элементо JSON, содержащий все поля шлейфа:

```json
{
    "Id": string,
    "ZoneNumber": number,
    "ZoneDesc": string,
    "ZoneEquip": string,
}
```

\definecolor{light-gray}{gray}{0.7}
\renewcommand{\arraystretch}{1.4}
\begin{tabularx}{\textwidth}{llX}
\textbf{Название поля} & \textbf{Тип} & \textbf{Поле в карточке объекта; примечание} \\ \midrule

Id & string & Идентификатор шлейфа \\ \arrayrulecolor{light-gray}\hline
ZoneNumber & number & Номер шлейфа (обязательное поле, натуральное число) \\ \arrayrulecolor{light-gray}\hline
ZoneDesc & string & Описание шлейфа (обязательное поле при создании, не может быть пустым) \\ \arrayrulecolor{light-gray}\hline
ZoneEquip & string & Оборудование шлейфа \\

\bottomrule
\end{tabularx}

## Получить список шлейфов объекта (GET /api/Zones) {#api-zones-get-list}

Метод предназначен для получения списка шлейфов объекта.

**URL** : `/api/Zones`

**Метод** : `GET`

### Параметры

#### siteId

Обязательный параметр.

Идентификатор объекта, список шлейфов которого нужно получить. Соответствует полю `Id` элемента JSON с [полями объекта](#api-site-json).

#### userName

Необязательный параметр.

Имя пользователя, от имени которого выполняется операция.

### Возможные статусы ответов

`200`, `403` – cм. «[Статусы ответов](#api-status-codes)».

### Возвращаемые данные

При успешном выполнении метод возвращает в теле ответа список элементов JSON с [полями шлейфа](#api-zone-json).

### Пример использования

```bash
curl --request GET \
  --header 'apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c' \
  --url 'http://10.7.22.128:9002/api/Zones?siteId=b8144107-31d1-4800-b83d-764f015a54a5&`
        `userName=crm-Ivanova-A-A'
```

**Status:** `200`

```json
[
    {
        "Id":"e6f14ede-65d3-45f7-a79e-80ebaf6f1301",
        "ZoneNumber":3,
        "ZoneDesc":"Описание шлейфа",
        "ZoneEquip":"Оборудование шлейфа"
    }
    {
        "Id":"e6f14ede-65d3-45f7-a79e-80ebaf6f1302",
        "ZoneNumber":4,
        "ZoneDesc":"Описание шлейфа 2",
        "ZoneEquip":"Оборудование шлейфа 2"
    }
]
```

## Получить шлейф по идентификатору (GET /api/Zones) {#api-zones-get-single}

Метод предназначен для получения информации о конкретном шлейфе. Для поиска шлейфа должен быть использован его идентификатор.

**URL** : `/api/Zones`

**Метод** : `GET`

### Параметры

#### id

Обязательный параметр.

Идентификатор шлейфа, информацию о котором нужно получить.

#### userName

Необязательный параметр.

Имя пользователя, от имени которого выполняется операция.

### Возможные статусы ответов

`200`, `400`, `403` – cм. «[Статусы ответов](#api-status-codes)».

### Возвращаемые данные

При успешном выполнении метод возвращает в теле ответа элемент JSON с [полями шлейфа](#api-zone-json).

### Пример использования

```bash
curl --request GET \
  --header 'apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c' \
  --url 'http://10.7.22.128:9002/api/Zones?id=524bf1a5-76ce-43a7-9ed5-56291750933e&`
        `userName=crm-Ivanova-A-A'
```

**Status:** `200`

```json
{
    "Id":"524bf1a5-76ce-43a7-9ed5-56291750933e",
    "ZoneNumber":3,
    "ZoneDesc":"Описание шлейфа",
    "ZoneEquip":"Оборудование шлейфа"
}
```

## Создать шлейф (POST /api/Zones) {#api-zones-post}

Метод предназначен для создания нового шлейфа для объекта.

**URL** : `/api/Zones`

**Метод** : `POST`

### Параметры

#### siteId

Обязательный параметр.

Идентификатор объекта, для которого нужно создать объект. Соответствует полю `Id` элемента JSON с [полями объекта](#api-site-json).

#### userName

Необязательный параметр.

Имя пользователя, от имени которого выполняется операция.

### Тело запроса

В теле запроса должен быть передан элемент JSON с [полями шлейфа](#api-zone-json), который нужно создать. Значения для всех полей, можно не указывать: будет использовано значение по умолчанию.

Если указан идентификатор шлейфа, то он будет проигнорирован.

Если номер шлейфа указан и шлейф с таким номером уже есть в списке шлейфов объекта, то метод вернет ошибку.

### Возможные статусы ответов

`201`, `400`, `403` – cм. «[Статусы ответов](#api-status-codes)».

### Возвращаемые данные

При успешном выполнении метод возвращает в теле ответа элемент JSON с информацией об идентификаторе, который получил созданный шлейф:

```json
{
    "Id": string
}
```

Если при выполнении запроса возникла ошибка, то запрос вернет код 400 и описание возникшей ошибки в теле ответа – см. «[Код 400: описание ошибки](#api-code-400-result)»

### Пример использования

```bash
curl --request POST \
  --header 'apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c' \
  --url 'http://10.7.22.128:9002/api/Zones?siteId=b8144107-31d1-4800-b83d-764f015a54a5&`
        `userName=crm-Ivanova-A-A' \
  --data '{"ZoneNumber": 3,"ZoneDesc": "Описание шлейфа", "ZoneEquip": "Оборудование шлейфа"}'
```

**Status** : `201`

```bash
{
    "Id": "524bf1a5-76ce-43a7-9ed5-56291750933f"
}
```

## Изменить шлейф (PUT /api/Zones) {#api-zones-put}

Метод предназначен для изменения полей шлейфа.

**URL** : `/api/Zones`

**Метод** : `PUT`

### Параметры

#### id

Обязательный параметр.

Идентификатор шлейфа, который нужно изменить.

#### userName

Необязательный параметр.

Имя пользователя, от имени которого выполняется операция.

### Тело запроса

В теле запроса должен быть передан элемент JSON с [полями шлейфа](#api-zone-json), которые нужно изменить. Если поле необходимо оставить без изменения, то оно не должно быть указано в эелементе JSON.

Идентификатор объекта передается параметром в заголовке запроса, поэтому поле `id` в элементе JSON может быть не указано или будет проигнорировано.

### Возможные статусы ответов

`200`, `400`, `403` – cм. «[Статусы ответов](#api-status-codes)».

### Возвращаемые данные

При успешном выполнении метод возвращает в теле ответа элемент JSON с [полями шлейфа](#api-zone-json) – с учетом изменений, которые произошли в результате выполнения запроса.

Если при выполнении запроса возникла ошибка, то запрос вернет код 400 и описание возникшей ошибки в теле ответа – см. «[Код 400: описание ошибки](#api-code-400-result)»

### Пример использования

```bash
curl --request PUT \
  --header 'apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c' \
  --url 'http://10.7.22.128:9002/api/Zones?id=524bf1a5-76ce-43a7-9ed5-56291750933f&`
        `userName=crm-Ivanova-A-A' \
  --data '{"ZoneDesc": "Новое описание шлейфа"}'
```

## Удалить шлейф (DELETE /api/Zones) {#api-zones-delete}

Метод предназначен для удаления шлейфа объекта.

**URL** : `/api/Zones`

**Метод** : `DELETE`

### Параметры

#### id

Обязательный параметр.

Идентификатор шлейфа, который нужно удалить.

#### userName

Необязательный параметр.

Имя пользователя, от имени которого выполняется операция.

### Возможные статусы ответов

`200`, `400`, `403` – cм. «[Статусы ответов](#api-status-codes)».

### Возвращаемые данные

При успешном выполнении метод не возвращает данных. Если при выполнении запроса возникла ошибка, то запрос вернет код 400 и описание возникшей ошибки в ответе – см. «[Код 400: описание ошибки](#api-code-400-result)»

### Пример использования

```bash
curl --request DELETE \
  --header 'apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c' \
  --url 'http://10.7.22.128:9002/api/Zones?id=524bf1a5-76ce-43a7-9ed5-56291750933f&`
        `userName=crm-Ivanova-A-A'
```