# Дополнительные характеристики

Методы для управления дополнительными характеристиками объекта: получение списка дополнительных характеристик, создание, изменение или удаление дополнительных характеристик объекта.

## Поля дополнительной характеристики {#api-extfield-json}

Элементо JSON, содержащий все поля дополнительной характеристики:

```json
{
    "Id": string,
    "ExtFieldName": string,
    "ExtFieldValue": string,
    "OrderNumber": number
}
```

\definecolor{light-gray}{gray}{0.7}
\renewcommand{\arraystretch}{1.4}
\begin{tabularx}{\textwidth}{llX}
\textbf{Название поля} & \textbf{Тип} & \textbf{Поле в карточке объекта; примечание} \\ \midrule

Id & string & Идентификатор характеристики \\ \arrayrulecolor{light-gray}\hline
ExtFieldName & string & Название характеристики \\ \arrayrulecolor{light-gray}\hline
ExtFieldValue & string & Значение характеритстики \\ \arrayrulecolor{light-gray}\hline
OrderNumber & number & Порядковый номер дополнительной характеристики \\

\bottomrule
\end{tabularx}

## Получить список дополнительных характеристик объекта (GET /api/ExtFields) {#api-extfields-get-list}

Метод предназначен для получения списка дополнительных характеристик объекта.

**URL** : `/api/ExtFields`

**Метод** : `GET`

### Параметры

#### siteId

Обязательный параметр.

Идентификатор объекта, список дополнительных характеристик которого нужно получить. Соответствует полю `Id` элемента JSON с [полями объекта](#api-site-json).

#### userName

Необязательный параметр.

Имя пользователя, от имени которого выполняется операция.

### Возможные статусы ответов

`200`, `403` – cм. «[Статусы ответов](#api-status-codes)».

### Возвращаемые данные

При успешном выполнении метод возвращает в теле ответа список элементов JSON с [полями дополнительной характеристики](#api-extfield-json).

### Пример использования

```bash
curl --request GET \
  --header 'apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c' \
  --url 'http://10.7.22.128:9002/api/ExtFields?siteId=b8144107-31d1-4800-b83d-764f015a54a5&`
        `userName=crm-Ivanova-A-A'
```

**Status:** `200`

```json
[
    {
        "Id":"c2022370-eaf2-4593-a401-175314c0db96",
        "ExtFieldName":"ExtraUserPhone",
        "ExtFieldValue":"88005553232",
        "OrderNumber":3
    },
    {
        "Id":"3cdf90f7-9687-44c8-b202-5d3dc9ddf4f3",
        "ExtFieldName":"ExtraUserCarNumber",
        "ExtFieldValue":"5dyw382",
        "OrderNumber":4
    }
]
```

## Получить дополнительную характеристику по идентификатору (GET /api/ExtFields) {#api-extfields-get-single}

Метод предназначен для получения информации о конкретной дополнительной характеристики. Для поиска дополнительной характеристики должен быть использован её идентификатор.

**URL** : `/api/ExtFields`

**Метод** : `GET`

### Параметры

#### id

Обязательный параметр.

Идентификатор дополнительной характеристики, информацию о которой нужно получить.

#### userName

Необязательный параметр.

Имя пользователя, от имени которого выполняется операция.

### Возможные статусы ответов

`200`, `400`, `403` – cм. «[Статусы ответов](#api-status-codes)».

### Возвращаемые данные

При успешном выполнении метод возвращает в теле ответа элемент JSON с [полями дополнительной характеристики](#api-extfield-json).

### Пример использования

```bash
curl --request GET \
  --header 'apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c' \
  --url 'http://10.7.22.128:9002/api/ExtFields?id=3cdf90f7-9687-44c8-b202-5d3dc9ddf4f3&`
        `userName=crm-Ivanova-A-A'
```

**Status:** `200`

```json
{
    "Id":"3cdf90f7-9687-44c8-b202-5d3dc9ddf4f3",
    "ExtFieldName":"ExtraUserCarNumber",
    "ExtFieldValue":"5dyw382",
    "OrderNumber":4
}
```

## Создать дополнительную характеристику (POST /api/ExtFields) {#api-extfields-post}

Метод предназначен для создания новой дополнительной характеристики для объекта.

**URL** : `/api/ExtFields`

**Метод** : `POST`

### Параметры

#### siteId

Обязательный параметр.

Идентификатор объекта, для которого нужно создать дополнительную характеристику. Соответствует полю `Id` элемента JSON с [полями объекта](#api-site-json).

#### userName

Необязательный параметр.

Имя пользователя, от имени которого выполняется операция.

### Тело запроса

В теле запроса должен быть передан элемент JSON с [полями дополнительной характеристики](#api-extfield-json), которую нужно создать. При создании дополнительной характеристики обязательно указать название и значение характеристики. Значения для всех остальных полей, можно не указывать: будет использовано значение по умолчанию.

Если указан идентификатор дополнительной характеристики, то он будет проигнорирован.

### Возможные статусы ответов

`201`, `400`, `403` – cм. «[Статусы ответов](#api-status-codes)».

### Возвращаемые данные

При успешном выполнении метод возвращает в теле ответа элемент JSON с информацией об идентификаторе, который получила созданная дополнительная характеристика:

```json
{
    "Id": string
}
```

Если при выполнении запроса возникла ошибка, то запрос вернет код 400 и описание возникшей ошибки в теле ответа – см. «[Код 400: описание ошибки](#api-code-400-result)»

### Пример использования

```bash
curl --request POST \
  --header 'apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c' \
  --url 'http://10.7.22.128:9002/api/ExtFields?siteId=b8144107-31d1-4800-b83d-764f015a54a5&`
        `userName=crm-Ivanova-A-A' \
  --data '{ "ExtFieldName": "ExtraUserPhone", "ExtFieldValue": "+79012345678" }'
```

**Status** : `201`

```bash
{
    "Id": "524bf1a5-76ce-43a7-9ed5-56291750933f"
}
```

## Изменить дополнительную характеристику (PUT /api/ExtFields) {#api-extfields-put}

Метод предназначен для изменения полей дополнительной характеристики.

**URL** : `/api/ExtFields`

**Метод** : `PUT`

### Параметры

#### id

Обязательный параметр.

Идентификатор дополнительной характеристики, которую нужно изменить.

#### userName

Необязательный параметр.

Имя пользователя, от имени которого выполняется операция.

### Тело запроса

В теле запроса должен быть передан элемент JSON с [полями дополнительной характеристики](#api-extfield-json), которые нужно изменить. Если поле необходимо оставить без изменения, то оно не должно быть указано в эелементе JSON. Название и значение характеристики обязательные поля.

Идентификатор дополнительной характеристики передается параметром в заголовке запроса, поэтому поле `id` в элементе JSON может быть не указано или будет проигнорировано.

### Возможные статусы ответов

`200`, `400`, `403` – cм. «[Статусы ответов](#api-status-codes)».

### Возвращаемые данные

При успешном выполнении метод возвращает в теле ответа элемент JSON с [полями дополнительной характеристики](#api-extfield-json) – с учетом изменений, которые произошли в результате выполнения запроса.

Если при выполнении запроса возникла ошибка, то запрос вернет код 400 и описание возникшей ошибки в теле ответа – см. «[Код 400: описание ошибки](#api-code-400-result)»

### Пример использования

```bash
curl --request PUT \
  --header 'apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c' \
  --url 'http://10.7.22.128:9002/api/ExtFields?id=524bf1a5-76ce-43a7-9ed5-56291750933f&`
        `userName=crm-Ivanova-A-A' \
  --data '{ "ExtFieldName": "ExtraUserPhone", "ExtFieldValue": "88005553232" }'
```

## Удалить дополнительную характеристику (DELETE /api/ExtFields) {#api-extfields-delete}

Метод предназначен для удаления дополнительной характеристики объекта.

**URL** : `/api/ExtFields`

**Метод** : `DELETE`

### Параметры

#### id

Обязательный параметр.

Идентификатор дополнительной характеристики, которую нужно удалить.

#### userName

Необязательный параметр.

Имя пользователя, от имени которого выполняется операция.

### Возможные статусы ответов

`200`, `400`, `403` – cм. «[Статусы ответов](#api-status-codes)».

### Возвращаемые данные

При успешном выполнении метод не возвращает данных. Если при выполнении запроса возникла ошибка, то запрос вернет код 400 и описание возникшей ошибки в ответе – см. «[Код 400: описание ошибки](#api-code-400-result)»

### Пример использования

```bash
curl --request DELETE \
  --header 'apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c' \
  --url 'http://10.7.22.128:9002/api/ExtFields?id=524bf1a5-76ce-43a7-9ed5-56291750933f&`
        `userName=crm-Ivanova-A-A'
```