# Общая информация

В документе описаны методы API, предоставялемые службой «C.Nord HTTP-API Service», являющейся частью программного обеспечения «Центр охраны».
API организован в виде REST-сервисов, описание ресурсов и методов доступа к ним дано в последующих разделах.

## Ограничение доступа

Для доступа к методам API в заголовке каждого запроса должен присутствовать параметр «apiKey» со значением, равным ключу безопасности сервиса «C.Nord HTTP-API Service», например: `apiKey: 41c66fd22dcf4742b65e9f5ea5ebde1c`. Если ключ доступа не соответствует установленному, то методы будут возвращать код 403 (cм. «[Статусы ответов](#api-status-codes)»).

## Настройки службы «C.Nord HTTP-API Service»

Параметры службы задаются в конфигурационном файле `CNord.WebApi.Service.exe.config`, расположенном в папке установки «Центра охраны». Файл в формате XML, настройки службы находятся в разделе `CNord.WebApi.ApiSettings`. Для изменения значения параметра необходимо изменить значение элемента «value» соответствующего элемента setting.

### Url

Протокол, локальный адрес и порт, используя которые служба будет принимать запросы.

**Значение по умолчанию:** `http://*:9200`

### ExternalUrl

Внешний адрес, по которому к службе обращаются клиенты. От этого адреса строятся адреса в предоставляемых пользователям ссылках. Может не совпадать с локальным адресом (Url) если служба расположена за реверс-прокси.

**Значение по умолчанию:** `http://*:9200`

### Encoding

Название кодировки транспортного файла. Возможные значения:

– UTF-8
– Unicode
– Windows-1251

**Значение по умолчанию:** `UTF-8`

### TransportFileCheckInterval

Интервал проверки наличия нового транспортного файла, в формате hh:mm:ss. Не может быть задано менее 10 секунд.

**Значение по умолчанию:** `00:10:00`

### CheckTransportFileOnStartup

Проверять ли наличие нового транспортного файла сразу при старте сервиса или ожидать истечения интервала (True/False)

**Значение по умолчанию:** `True`

### TransportFilePath

Полный путь к транспортному файлу. Если указывать относительный, то адрес будет проверяться от рабочей папки сервиса, которая находится в системной папке Windows.

**Значение по умолчанию:** `sc-api-tf.csv`

### TransportFileCheckerTempFile

Путь к временному файлу для хранения данных о последнем загруженном транспортном файле (используется для проверки наличия изменений в новой версии файла). При отсутствии файла он создается (если есть права создания по указанному пути). Рекомендуется указывать полный путь. Если указывать относительный путь, то адрес будет проверяться от рабочей папки сервиса, которая находится в системной папке Windows.

**Значение по умолчанию:** `workdb`

### ApiKey

Ключ безопасности службы, который должен передаваться в заголовке любого запроса. Допустимое значение - произвольная строка. Если указано пустое значение, то обработка запросов будет отключена.

**Значение по умолчанию:** не задано (пустое)

### DefaultPageSize

Размер страницы списка объектов, используемый по умолчанию (если клиент не передал в метод свой размер страницы).

**Значение по умолчанию:** `100`

### EnableSwaggerUI

Включить или выключить возможность просмотра интерактивной документации по методам API – при открытии адреса сервис в браузере можно просмотреть доступные ресурсы и их методы, а так же провести вызовы операций. Доступные значения: True/False. Если параметр не указан, то просмотр документации доступен.

**Значение по умолчанию:** `False`